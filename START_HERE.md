# üöÄ –ù–∞—á–Ω–∏—Ç–µ –∑–¥–µ—Å—å - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ vov.sneakernet.top

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
./scripts/quick-test-migration.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
2. üì¶ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. üìù –ü–æ–∫–∞–∂–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

## –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ

### –®–∞–≥ 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
./scripts/test-migration.sh
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 20/20 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ ‚úÖ

### –®–∞–≥ 2: –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
./scripts/deploy-to-test-server.sh root@vov.sneakernet.top
```

### –®–∞–≥ 3: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@vov.sneakernet.top
cd /root/stealth-vpn-server

# –¢–µ—Å—Ç—ã
./scripts/test-migration.sh

# –ú–∏–≥—Ä–∞—Ü–∏—è
./scripts/migrate-to-new-version.sh
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- üìñ **[TEST_ON_SERVER.md](TEST_ON_SERVER.md)** - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
- üìñ **[QUICK_START_MIGRATION_TEST.md](QUICK_START_MIGRATION_TEST.md)** - –ü–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥
- üìã **[MIGRATION_TEST_CHECKLIST.md](MIGRATION_TEST_CHECKLIST.md)** - –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è
- üìñ **[docs/MIGRATION_GUIDE.md](docs/MIGRATION_GUIDE.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- üìñ **[docs/MIGRATION_SCRIPTS.md](docs/MIGRATION_SCRIPTS.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- üìñ **[docs/TESTING_MIGRATION.md](docs/TESTING_MIGRATION.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
- üìä **[MIGRATION_TEST_RESULTS.md](MIGRATION_TEST_RESULTS.md)** - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (20/20)
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø—Ä–µ–¥—Å—Ç–æ–∏—Ç)
1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** (5 –º–∏–Ω)
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

2. **–ú–∏–≥—Ä–∞—Ü–∏—è** (5-10 –º–∏–Ω)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
   - –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞** (5 –º–∏–Ω)
   - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ VPN

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~20-30 –º–∏–Ω—É—Ç

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- ‚úÖ –ë—ç–∫–∞–ø —á–µ—Ä–µ–∑ BackupManager
- ‚úÖ –ë—ç–∫–∞–ø docker-compose.yml
- ‚úÖ –ë—ç–∫–∞–ø Caddyfile

### –û—Ç–∫–∞—Ç
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
./scripts/rollback-migration.sh

# –†—É—á–Ω–æ–π
docker compose down
cp docker-compose.yml.pre-migration docker-compose.yml
cp config/Caddyfile.pre-migration config/Caddyfile
docker compose up -d
```

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è

### –û–±–Ω–æ–≤–∏—Ç—Å—è
- ‚öôÔ∏è docker-compose.yml (–ª–∏–º–∏—Ç—ã CPU)
- ‚öôÔ∏è Caddyfile (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
- üê≥ Docker –æ–±—Ä–∞–∑—ã (–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞)

### –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è
- üîí SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- üë• –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ VPN
- üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã "Up (healthy)"  
‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞  
‚úÖ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö  
‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã  

## –ü–æ–º–æ—â—å

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥: `cat migration_*.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä–≤–∏—Å—ã: `docker compose logs`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–∫–∞—Ç: `./scripts/rollback-migration.sh`

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –°—Ç–∞—Ç—É—Å
docker compose ps

# –õ–æ–≥–∏
docker compose logs -f

# –†–µ—Å—É—Ä—Å—ã
docker stats

# –ó–¥–æ—Ä–æ–≤—å–µ
./scripts/health-check.sh
```

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
./scripts/quick-test-migration.sh
```

–ò–ª–∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [TEST_ON_SERVER.md](TEST_ON_SERVER.md)

---

**–ì–æ—Ç–æ–≤—ã?** –ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ! üöÄ
